{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"button=html`<button class=\"btn btn-primary\">Open Street View</button>`","pinCode":false,"dname":"4546ad4b-c6c1-40fb-a9df-ae3ff2abb22c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"mapHolder=html`<div style='height:700px; background-color: white;'></div>`","pinCode":false,"dname":"78528056-3cb9-448f-a3ef-575ef8b13483","codeMode":"javascript2","hide":false}}},{"type":"codeTool","data":{"codeData":{"value":"API = (await require('@kineviz/graphxr-api@0.0.227')).getApi()","pinCode":false,"dname":"98170762-53af-451d-a816-ae1fa91abcc2","codeMode":"javascript2","hide":true}}},{"type":"codeTool","data":{"codeData":{"value":"google = require('https://maps.googleapis.com/maps/api/js?key=' + Secret(\"Google API key\")).catch(() => window.google)","pinCode":false,"dname":"e710074d-6486-41d4-bc45-fbad1cdaa51e","codeMode":"javascript2","hide":true}}},{"type":"codeTool","data":{"codeData":{"value":"button.onclick = function () {\n  let view = API.getLayoutGraph()\n  \n  //Fetching the properties of the node selected\n  let selectedNodes = view.getVisibleNodes().filter(n=>view.getNodeStyles(n.id).selected)\n  if (selectedNodes.length == 0) return;\n  \n  let selectedNode = selectedNodes[0].properties\n  let position = {lng: selectedNode[\"longitude\"], lat: selectedNode[\"latitude\"]}\n  \n  let panorama = new google.maps.StreetViewPanorama(\n    mapHolder,\n    {\n      position: position,\n      pov: {\n        heading: 0,\n        pitch: 0\n      }\n    }\n  )\n}","pinCode":false,"dname":"93fbc721-1532-4e69-824e-4ed1e573dd38","codeMode":"javascript2","hide":true}}}],"version":"2.19.1"}